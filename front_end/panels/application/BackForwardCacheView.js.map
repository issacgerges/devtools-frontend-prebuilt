{"version":3,"file":"BackForwardCacheView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/application/BackForwardCacheView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as LitHtml from '../../ui/lit-html/lit-html.js';\nimport * as ReportView from '../../ui/components/report_view/report_view.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\n\nimport {NotRestoredReasonDescription} from './BackForwardCacheStrings.js';\nimport backForwardCacheViewStyles from './backForwardCacheView.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Title text in Back-forward Cache view of the Application panel\n   */\n  mainFrame: 'Main Frame',\n  /**\n   * @description Title text in Back-forward Cache view of the Application panel\n   */\n  backForwardCacheTitle: 'Back-forward Cache',\n  /**\n   * @description Status text for the status of the main frame\n   */\n  unavailable: 'unavailable',\n  /**\n   * @description Entry name text in the Back-forward Cache view of the Application panel\n   */\n  url: 'URL',\n  /**\n   * @description Entry name text in the Back-forward Cache view of the Application panel\n   */\n  bfcacheStatus: 'Back-forward Cache Status',\n  /**\n   * @description Status text for the status of the back-forward cache status\n   */\n  unknown: 'unknown',\n  /**\n   * @description Status text for the status of the back-forward cache status indicating that\n   * the back-forward cache was not used and a normal navigation occured instead.\n   */\n  normalNavigation: 'Normal navigation (Not restored from back-forward cache)',\n  /**\n   * @description Status text for the status of the back-forward cache status indicating that\n   * the back-forward cache was used to restore the page instead of reloading it.\n   */\n  restoredFromBFCache: 'Restored from back-forward cache',\n  /**\n   * @description Label for a list of reasons which prevent the page from being eligible for\n   * back-forward cache. These reasons are actionable i.e. they can be cleaned up to make the\n   * page eligible for back-forward cache.\n   */\n  pageSupportNeeded: 'Actionable',\n  /**\n   * @description Explanation for actionable items which prevent the page from being eligible\n   * for back-forward cache.\n   */\n  pageSupportNeededExplanation:\n      'These reasons are actionable i.e. they can be cleaned up to make the page eligible for back-forward cache.',\n  /**\n   * @description Label for a list of reasons which prevent the page from being eligible for\n   * back-forward cache. These reasons are circumstantial / not actionable i.e. they cannot be\n   * cleaned up by developers to make the page eligible for back-forward cache.\n   */\n  circumstantial: 'Not Actionable',\n  /**\n   * @description Explanation for circumstantial/non-actionable items which prevent the page from being eligible\n   * for back-forward cache.\n   */\n  circumstantialExplanation:\n      'These reasons are not actionable i.e. caching was prevented by something outside of the direct control of the page.',\n  /**\n   * @description Label for a list of reasons which prevent the page from being eligible for\n   * back-forward cache. These reasons are pending support by chrome i.e. in a future version\n   * of chrome they will not prevent back-forward cache usage anymore.\n   */\n  supportPending: 'Pending Support',\n  /**\n   * @description Button name for showing whether BFCache is available in the pages.\n   */\n  runTest: 'Run Test',\n  /**\n   * @description Explanation for 'pending support' items which prevent the page from being eligible\n   * for back-forward cache.\n   */\n  supportPendingExplanation:\n      'Chrome support for these reasons is pending i.e. they will not prevent the page from being eligible for back-forward cache in a future version of Chrome.',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/application/BackForwardCacheView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class BackForwardCacheView extends UI.ThrottledWidget.ThrottledWidget {\n  constructor() {\n    super(true, 1000);\n    this.getMainResourceTreeModel()?.addEventListener(\n        SDK.ResourceTreeModel.Events.MainFrameNavigated, this.onBackForwardCacheUpdate, this);\n    this.getMainResourceTreeModel()?.addEventListener(\n        SDK.ResourceTreeModel.Events.BackForwardCacheDetailsUpdated, this.onBackForwardCacheUpdate, this);\n    this.update();\n  }\n\n  wasShown(): void {\n    super.wasShown();\n    this.registerCSSFiles([backForwardCacheViewStyles]);\n  }\n\n  private onBackForwardCacheUpdate(): void {\n    this.update();\n  }\n\n  async doUpdate(): Promise<void> {\n    const data = {reportTitle: i18nString(UIStrings.backForwardCacheTitle)};\n    const html = LitHtml.html`\n      <${ReportView.ReportView.Report.litTagName} .data=${data as ReportView.ReportView.ReportData}>\n      ${this.renderMainFrameInformation(this.getMainFrame())}\n      </${ReportView.ReportView.Report.litTagName}>\n    `;\n    LitHtml.render(html, this.contentElement, {host: this});\n  }\n\n  private getMainResourceTreeModel(): SDK.ResourceTreeModel.ResourceTreeModel|null {\n    const mainTarget = SDK.TargetManager.TargetManager.instance().mainTarget();\n    return mainTarget?.model(SDK.ResourceTreeModel.ResourceTreeModel) || null;\n  }\n\n  private getMainFrame(): SDK.ResourceTreeModel.ResourceTreeFrame|null {\n    return this.getMainResourceTreeModel()?.mainFrame || null;\n  }\n\n  private async goBackOneHistoryEntry(): Promise<void> {\n    SDK.TargetManager.TargetManager.instance().removeModelListener(\n        SDK.ResourceTreeModel.ResourceTreeModel, SDK.ResourceTreeModel.Events.FrameNavigated,\n        this.goBackOneHistoryEntry, this);\n    const mainTarget = SDK.TargetManager.TargetManager.instance().mainTarget();\n    if (!mainTarget) {\n      return;\n    }\n    const resourceTreeModel = mainTarget.model(SDK.ResourceTreeModel.ResourceTreeModel);\n    if (!resourceTreeModel) {\n      return;\n    }\n    const historyResults = await resourceTreeModel.navigationHistory();\n    if (!historyResults) {\n      return;\n    }\n    resourceTreeModel.navigateToHistoryEntry(historyResults.entries[historyResults.currentIndex - 1]);\n  }\n\n  private async navigateAwayAndBack(): Promise<void> {\n    // Checking BFCache Compatibility\n\n    const mainTarget = SDK.TargetManager.TargetManager.instance().mainTarget();\n    if (!mainTarget) {\n      return;\n    }\n    const resourceTreeModel = mainTarget.model(SDK.ResourceTreeModel.ResourceTreeModel);\n\n    if (resourceTreeModel) {\n      // This event is removed by inside of goBackOneHistoryEntry().\n      SDK.TargetManager.TargetManager.instance().addModelListener(\n          SDK.ResourceTreeModel.ResourceTreeModel, SDK.ResourceTreeModel.Events.FrameNavigated,\n          this.goBackOneHistoryEntry, this);\n\n      // We can know whether the current page can use BFCache\n      // as the browser navigates to another unrelated page and goes back to the current page.\n      // We chose \"chrome://version\" because it must be cross-site.\n      // Ideally, We want to have our own testing page like \"chrome: //bfcache-test\".\n      resourceTreeModel.navigate('chrome://version/');\n    }\n  }\n\n  private renderMainFrameInformation(mainFrame: SDK.ResourceTreeModel.ResourceTreeFrame|null): LitHtml.TemplateResult {\n    if (!mainFrame) {\n      return LitHtml.html`<${ReportView.ReportView.ReportKey.litTagName}>${i18nString(UIStrings.mainFrame)}</${\n          ReportView.ReportView.ReportKey.litTagName}>\n      <${ReportView.ReportView.ReportValue.litTagName}>\n      ${i18nString(UIStrings.unavailable)}\n      </${ReportView.ReportView.ReportValue.litTagName}>`;\n    }\n    return LitHtml.html`\n      <${ReportView.ReportView.ReportSectionHeader.litTagName}>\n      <${Buttons.Button.Button.litTagName}\n            .variant=${Buttons.Button.Variant.PRIMARY}\n            @click=${this.navigateAwayAndBack}>\n            ${i18nString(UIStrings.runTest)}\n      </${Buttons.Button.Button.litTagName}>\n      </${ReportView.ReportView.ReportSectionHeader.litTagName}>\n      <${ReportView.ReportView.ReportKey.litTagName}>${i18nString(UIStrings.url)}</${\n        ReportView.ReportView.ReportKey.litTagName}>\n      <${ReportView.ReportView.ReportValue.litTagName}>${mainFrame.url}</${\n        ReportView.ReportView.ReportValue.litTagName}>\n      <${ReportView.ReportView.ReportKey.litTagName}>${i18nString(UIStrings.bfcacheStatus)}</${\n        ReportView.ReportView.ReportKey.litTagName}>\n      <${ReportView.ReportView.ReportValue.litTagName}>${\n        this.renderBackForwardCacheStatus(\n            mainFrame.backForwardCacheDetails.restoredFromCache)}</${ReportView.ReportView.ReportValue.litTagName}>\n       ${this.maybeRenderExplanations(mainFrame.backForwardCacheDetails.explanations)}\n    `;\n  }\n\n  private renderBackForwardCacheStatus(status: boolean|undefined): Platform.UIString.LocalizedString {\n    switch (status) {\n      case true:\n        return i18nString(UIStrings.restoredFromBFCache);\n      case false:\n        return i18nString(UIStrings.normalNavigation);\n    }\n    return i18nString(UIStrings.unknown);\n  }\n\n  private maybeRenderExplanations(explanations: Protocol.Page.BackForwardCacheNotRestoredExplanation[]):\n      LitHtml.TemplateResult|{} {\n    if (explanations.length === 0) {\n      return LitHtml.nothing;\n    }\n\n    const pageSupportNeeded = explanations.filter(\n        explanation => explanation.type === Protocol.Page.BackForwardCacheNotRestoredReasonType.PageSupportNeeded);\n    const supportPending = explanations.filter(\n        explanation => explanation.type === Protocol.Page.BackForwardCacheNotRestoredReasonType.SupportPending);\n    const circumstantial = explanations.filter(\n        explanation => explanation.type === Protocol.Page.BackForwardCacheNotRestoredReasonType.Circumstantial);\n\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    return LitHtml.html`\n      ${this.renderExplanations(i18nString(UIStrings.pageSupportNeeded), i18nString(UIStrings.pageSupportNeededExplanation), pageSupportNeeded)}\n      ${this.renderExplanations(i18nString(UIStrings.supportPending), i18nString(UIStrings.supportPendingExplanation), supportPending)}\n      ${this.renderExplanations(i18nString(UIStrings.circumstantial), i18nString(UIStrings.circumstantialExplanation), circumstantial)}\n    `;\n    // clang-format on\n  }\n\n  private renderExplanations(\n      category: Platform.UIString.LocalizedString, explainerText: Platform.UIString.LocalizedString,\n      explanations: Protocol.Page.BackForwardCacheNotRestoredExplanation[]): LitHtml.TemplateResult {\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    return LitHtml.html`\n      ${explanations.length > 0 ? LitHtml.html`\n        <${ReportView.ReportView.ReportKey.litTagName}>\n          ${category}\n          <${IconButton.Icon.Icon.litTagName} class=\"inline-icon\" .data=${{\n            iconName: 'help_outline',\n            color: 'var(--color-text-secondary)',\n            width: '16px',\n            height: '16px',\n            } as IconButton.Icon.IconData} title=${explainerText}></${IconButton.Icon.Icon.litTagName}>\n        </${ReportView.ReportView.ReportKey.litTagName}>\n        <${ReportView.ReportView.ReportValue.litTagName}>\n          <ul class='not-restored-reason-list'>${explanations.map(explanation => this.renderReason(explanation))}</ul>\n        </${ReportView.ReportView.ReportValue.litTagName}>\n      ` : LitHtml.nothing}\n    `;\n    // clang-format on\n  }\n\n  private renderReason(explanation: Protocol.Page.BackForwardCacheNotRestoredExplanation): LitHtml.TemplateResult {\n    return LitHtml.html`\n      <li>${explanation.reason} : ${\n        (explanation.reason in NotRestoredReasonDescription) ?\n            LitHtml.html`${NotRestoredReasonDescription[explanation.reason].name()}` :\n            LitHtml.nothing} </li>\n    `;\n  }\n}\n"]}