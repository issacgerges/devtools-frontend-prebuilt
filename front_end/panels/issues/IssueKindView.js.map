{"version":3,"file":"IssueKindView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/issues/IssueKindView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport * as Adorners from '../../ui/components/adorners/adorners.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as IssueCounter from '../../ui/components/issue_counter/issue_counter.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport * as Components from './components/components.js';\n\nconst UIStrings = {\n  /**\n    * @description Menu entry for hiding all current issues belonging to a particular kind.\n    * @example {Page Errors} PH1\n    */\n  hideAllCurrent: 'Hide all current {PH1}',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/IssueKindView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport function getGroupIssuesByKindSetting(): Common.Settings.Setting<boolean> {\n  return Common.Settings.Settings.instance().createSetting('groupIssuesByKind', false);\n}\n\nexport function issueKindViewSortPriority(a: IssueKindView, b: IssueKindView): number {\n  if (a.getKind() === b.getKind()) {\n    return 0;\n  }\n  if (a.getKind() === IssuesManager.Issue.IssueKind.PageError) {\n    return -1;\n  }\n  if (a.getKind() === IssuesManager.Issue.IssueKind.BreakingChange &&\n      b.getKind() === IssuesManager.Issue.IssueKind.Improvement) {\n    return -1;\n  }\n  return 1;\n}\n\nexport function getClassNameFromKind(kind: IssuesManager.Issue.IssueKind): string {\n  switch (kind) {\n    case IssuesManager.Issue.IssueKind.BreakingChange:\n      return 'breaking-changes';\n    case IssuesManager.Issue.IssueKind.Improvement:\n      return 'improvements';\n    case IssuesManager.Issue.IssueKind.PageError:\n      return 'page-errors';\n  }\n}\n\nexport class IssueKindView extends UI.TreeOutline.TreeElement {\n  private kind: IssuesManager.Issue.IssueKind;\n  private issueCount: HTMLElement;\n\n  constructor(kind: IssuesManager.Issue.IssueKind) {\n    super(undefined, true);\n    this.kind = kind;\n    this.issueCount = document.createElement('span');\n\n    this.toggleOnClick = true;\n    this.listItemElement.classList.add('issue-kind');\n    this.listItemElement.classList.add(getClassNameFromKind(kind));\n    this.childrenListElement.classList.add('issue-kind-body');\n  }\n\n  getKind(): IssuesManager.Issue.IssueKind {\n    return this.kind;\n  }\n\n  private appendHeader(): void {\n    const header = document.createElement('div');\n    header.classList.add('header');\n\n    const issueKindIcon = new IconButton.Icon.Icon();\n    issueKindIcon.data = IssueCounter.IssueCounter.getIssueKindIconData(this.kind);\n    issueKindIcon.classList.add('leading-issue-icon');\n\n    const countAdorner = new Adorners.Adorner.Adorner();\n    countAdorner.data = {\n      name: 'countWrapper',\n      content: this.issueCount,\n    };\n    countAdorner.classList.add('aggregated-issues-count');\n    this.issueCount.textContent = '0';\n\n    const title = document.createElement('div');\n    title.classList.add('title');\n    title.textContent = IssuesManager.Issue.getIssueKindName(this.kind);\n\n    const hideAvailableIssuesBtn = new Components.HideIssuesMenu.HideIssuesMenu();\n    hideAvailableIssuesBtn.classList.add('hide-available-issues');\n    hideAvailableIssuesBtn.data = {\n      menuItemLabel: i18nString(UIStrings.hideAllCurrent, {PH1: IssuesManager.Issue.getIssueKindName(this.kind)}),\n      menuItemAction: (): void => {\n        const setting = IssuesManager.IssuesManager.getHideIssueByCodeSetting();\n        const values = setting.get();\n        for (const issue of IssuesManager.IssuesManager.IssuesManager.instance().issues()) {\n          if (issue.getKind() === this.kind) {\n            values[issue.code()] = IssuesManager.IssuesManager.IssueStatus.Hidden;\n          }\n        }\n        setting.set(values);\n      },\n    };\n\n    header.appendChild(issueKindIcon);\n    header.appendChild(countAdorner);\n    header.appendChild(title);\n    header.appendChild(hideAvailableIssuesBtn);\n    header.addEventListener('mouseenter', () => {\n      hideAvailableIssuesBtn.setVisible(true);\n    });\n    header.addEventListener('mouseleave', () => {\n      hideAvailableIssuesBtn.setVisible(false);\n    });\n\n    this.listItemElement.appendChild(header);\n  }\n\n  onattach(): void {\n    this.appendHeader();\n    this.expand();\n  }\n\n  update(count: number): void {\n    this.issueCount.textContent = `${count}`;\n  }\n}\n"]}