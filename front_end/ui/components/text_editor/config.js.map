{"version":3,"file":"config.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/components/text_editor/config.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,MAAM,MAAM,gCAAgC,CAAC;AACzD,OAAO,KAAK,IAAI,MAAM,4BAA4B,CAAC;AACnD,OAAO,KAAK,EAAE,MAAM,yDAAyD,CAAC;AAC9E,OAAO,KAAK,eAAe,MAAM,yCAAyC,CAAC;AAE3E,OAAO,EAAC,WAAW,EAAC,MAAM,YAAY,CAAC;AAEvC,MAAM,sCAAsC,GAAG,IAAI,CAAC;AAEpD,MAAM,SAAS,GAAG;IAChB;;MAEE;IACF,UAAU,EAAE,aAAa;CAC1B,CAAC;AACF,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,qCAAqC,EAAE,SAAS,CAAC,CAAC;AAC3F,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAEtE,MAAM,KAAK,GAAiB,EAAE,CAAC;AAE/B,MAAM,CAAC,MAAM,cAAc,GAAG,EAAE,CAAC,KAAK,CAAC,MAAM,EAA2B,CAAC;AAEzE,sEAAsE;AACtE,mEAAmE;AACnE,iEAAiE;AACjE,0DAA0D;AAE1D,MAAM,OAAO,cAAc;IAKZ;IACQ;IALrB,WAAW,GAAG,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;IACnC,SAAS,CAAe;IAExB,YACa,WAAmB,EACX,YAA+D;QADvE,gBAAW,GAAX,WAAW,CAAQ;QACX,iBAAY,GAAZ,YAAY,CAAmD;QAElF,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,cAAc,CAAC,EAAE,CAAC,IAA+B,CAAC,CAAC,CAAC;IACpG,CAAC;IAED,IAAI,CAAC,KAAqB,EAAE,KAAQ;QAClC,MAAM,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACxC,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;QAC/C,OAAO,GAAG,KAAK,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;IACtE,CAAC;IAED,MAAM,CAAC,IAAI,CAAC,IAAY,EAAE,OAAqB,EAAE,WAAyB,KAAK;QAC7E,OAAO,IAAI,cAAc,CAAU,IAAI,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;IAC5E,CAAC;CACF;AAED,MAAM,CAAC,MAAM,aAAa,GAAG,cAAc,CAAC,IAAI,CAAC,yBAAyB,EAAE,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QACxF,GAAG,EAAE,KAAK;QACV,GAAG,EAAE,CAAC,IAAmB,EAAW,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK;QAC1F,KAAK,EAAE,CAAC,IAAmB,EAAW,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK;KAC7F,CAAC,CAAC,CAAC,CAAC;AAEL,MAAM,CAAC,MAAM,cAAc,GAAG,cAAc,CAAC,IAAI,CAAC,0BAA0B,EAAE,EAAE,CAAC,cAAc,CAAC,EAAC,KAAK,EAAE,KAAK,EAAC,CAAC,CAAC,CAAC;AAEjH,MAAM,CAAC,MAAM,eAAe,GAAG,cAAc,CAAC,IAAI,CAAC,2BAA2B,EAAE,EAAE,CAAC,eAAe,EAAE,CAAC,CAAC;AAEtG,MAAM,CAAC,MAAM,WAAW,GAAG,cAAc,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AAExH,MAAM,UAAU,WAAW,CAAC,GAAY;IACtC,MAAM,MAAM,GAA+B,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAC/D,IAAI,OAAO,GAAG,CAAC,CAAC;IAChB,KAAK,IAAI,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,GAAG,CAAC,EAAE,sCAAsC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,IAAI,GAAG;QACnH,IAAI,KAAK,GAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAc,CAAC,CAAC,CAAC,CAAC;QACpD,IAAI,KAAK,CAAC,MAAM,KAAK,GAAG,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;YACtD,SAAS;SACV;QACD,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;YACrB,KAAK,GAAG,IAAI,CAAC;SACd;aAAM,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;YAC7B,SAAS;SACV;QACD,OAAO,EAAE,CAAC;QACV,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;KAC1C;IACD,MAAM,aAAa,GAAG,OAAO,GAAG,IAAI,CAAC;IACrC,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACpG,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC,GAAG,EAAE,CAAC;AACpH,CAAC;AAED,MAAM,gBAAgB,GAAqC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAE/E,SAAS,aAAa,CAAC,MAAc;IACnC,IAAI,KAAK,GAAG,gBAAgB,CAAC,MAAM,CAAC,CAAC;IACrC,IAAI,CAAC,KAAK,EAAE;QACV,KAAK,GAAG,gBAAgB,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;KAC7D;IACD,OAAO,KAAK,CAAC;AACf,CAAC;AAED,MAAM,CAAC,MAAM,gBAAgB,GAAG,IAAI,cAAc,CAAU,4BAA4B,EAAE,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE;IACtG,OAAO,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;AAC9E,CAAC,CAAC,CAAC;AAEH,SAAS,OAAO,CAAC,SAA4B;IAC3C,OAAO,EAAE,CAAC,UAAU,CAAC,MAAM,CACvB,IAAI,CAAC,EAAE,CAAC,CAAC;QACP,WAAW,EAAE,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC;QACvC,MAAM,CAAC,CAAC;YACN,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QAC/D,CAAC;KACF,CAAC,EACF;QACE,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,WAAW;KAChC,CAAC,CAAC;AACT,CAAC;AAED,MAAM,cAAc,GAAG,IAAI,GAAG,EAAyB,CAAC;AAExD,SAAS,iBAAiB,CAAC,KAAa;IACtC,MAAM,MAAM,GAAG,cAAc,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;IACzC,IAAI,MAAM,EAAE;QACV,OAAO,MAAM,CAAC;KACf;IACD,MAAM,MAAM,GAAG,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC;QAChC,UAAU,EAAE,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC;YAC3B,KAAK,EAAE,mBAAmB;SAC3B,CAAC,CAAC;YAC0B,EAAC,KAAK,EAAE,sBAAsB,EAAE,cAAc,EAAE,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,EAAC;KACvG,CAAC,CAAC;IACH,cAAc,CAAC,GAAG,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;IAClC,OAAO,MAAM,CAAC;AAChB,CAAC;AAED,MAAM,iBAAiB,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC,cAAc,CAAC;IACtD,MAAM,EAAE,QAAQ;IAChB,UAAU,EAAE,CAAC,KAAsB,EAAiB,EAAE,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IAClF,QAAQ,EAAE,IAAI;CACf,CAAC,CAAC,CAAC;AAEJ,MAAM,sBAAsB,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC,cAAc,CAAC;IAC3D,MAAM,EAAE,OAAO;IACf,UAAU,EAAE,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,EAAC,KAAK,EAAE,uBAAuB,EAAC,CAAC;IAChE,QAAQ,EAAE,IAAI;CACf,CAAC,CAAC,CAAC;AAEJ,MAAM,CAAC,MAAM,cAAc,GAAG,IAAI,cAAc,CAAS,yBAAyB,EAAE,KAAK,CAAC,EAAE;IAC1F,IAAI,KAAK,KAAK,KAAK,EAAE;QACnB,OAAO,iBAAiB,CAAC;KAC1B;IACD,IAAI,KAAK,KAAK,UAAU,EAAE;QACxB,OAAO,sBAAsB,CAAC;KAC/B;IACD,OAAO,KAAK,CAAC;AACf,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,kBAAkB,GAAG,cAAc,CAAC,IAAI,CAAC,oBAAoB,EAAE,EAAE,CAAC,aAAa,EAAE,CAAC,CAAC;AAEhG,MAAM,CAAC,MAAM,UAAU,GAAG,IAAI,cAAc,CAAS,kBAAkB,EAAE,aAAa,CAAC,CAAC;AAExF,MAAM,CAAC,MAAM,WAAW,GAAG,cAAc,CAAC,IAAI,CAAC,aAAa,EAAE,EAAE,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;AAE1F,SAAS,mBAAmB,CAAC,IAAY;IACvC,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;QAClD,OAAO,EAAE,CAAC,WAAW,CAAC,aAAa,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;KAChD;IACD,OAAO,EAAE,CAAC;AACZ,CAAC;AAED,MAAM,UAAU,GAAG,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC;IAC9B,EAAC,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,EAAE,CAAC,gBAAgB,EAAC;IACtC,EAAC,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,EAAE,CAAC,qBAAqB,EAAE,KAAK,EAAE,EAAE,CAAC,qBAAqB,EAAC;IAC/E,EAAC,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,EAAE,CAAC,aAAa,EAAC;IACrC,EAAC,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,EAAE,CAAC,oBAAoB,EAAC;IAC5C,EAAC,GAAG,EAAE,eAAe,EAAE,GAAG,EAAE,gBAAgB,EAAE,GAAG,EAAE,EAAE,CAAC,qBAAqB,EAAE,KAAK,EAAE,EAAE,CAAC,qBAAqB,EAAC;IAC7G,EAAC,GAAG,EAAE,gBAAgB,EAAE,GAAG,EAAE,iBAAiB,EAAE,GAAG,EAAE,EAAE,CAAC,oBAAoB,EAAE,KAAK,EAAE,EAAE,CAAC,oBAAoB,EAAC;IAC7G,GAAG,EAAE,CAAC,mBAAmB;IACzB,GAAG,EAAE,CAAC,cAAc;IACpB,GAAG,EAAE,CAAC,aAAa;CACpB,CAAC,CAAC;AAEH,SAAS,WAAW;IAClB,MAAM,OAAO,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,CAAC;IACnF,OAAO,OAAO,KAAK,iBAAiB,CAAC,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,8BAA8B,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,KAAK,MAAM,CAAC;AACxH,CAAC;AAED,MAAM,cAAc,GAAG,EAAE,CAAC,UAAU,CAAC,KAAK,CAAC,EAAE,EAAE,EAAC,IAAI,EAAE,IAAI,EAAC,CAAC,CAAC;AAE7D,MAAM,UAAU,iBAAiB,CAAC,IAAY;IAC5C,OAAO;QACL,WAAW;QACX,WAAW,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE;QACnC,EAAE,CAAC,qBAAqB,EAAE;QAC1B,EAAE,CAAC,OAAO,EAAE;QACZ,EAAE,CAAC,aAAa,EAAE;QAClB,EAAE,CAAC,WAAW,CAAC,uBAAuB,CAAC,EAAE,CAAC,IAAI,CAAC;QAC/C,EAAE,CAAC,aAAa,EAAE;QAClB,eAAe,CAAC,eAAe,CAAC,iBAAiB,CAAC,EAAE,CAAC;QACrD,EAAE,CAAC,aAAa,EAAE;QAClB,UAAU;QACV,aAAa;QACb,eAAe;QACf,UAAU;QACV,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,CAAC,iBAAiB,CAAC,EAAE,CAAC,EAAC,YAAY,EAAE,UAAU,CAAC,SAAS,CAAC,UAAU,CAAC,EAAC,CAAC,CAAC;QACtG,mBAAmB,CAAC,IAAI,CAAC;QACzB,cAAc;QACd,EAAE,CAAC,QAAQ,CAAC,EAAC,MAAM,EAAE,cAAc,EAA4B,EAAC,CAAC;KAClE,CAAC;AACJ,CAAC;AAED,sEAAsE;AACtE,iEAAiE;AACjE,sEAAsE;AACtE,qEAAqE;AACrE,qEAAqE;AACrE,qDAAqD;AACrD,IAAI,WAAW,GAAoB,IAAI,CAAC;AAExC,SAAS,cAAc;IACrB,IAAI,CAAC,WAAW,EAAE;QAChB,MAAM,YAAY,GAAG,EAAE,CAAC,WAAW;aACT,MAAM,CAAC;YACN,UAAU,EAAE;gBACV,WAAW;gBACX,WAAW,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE;gBACnC,eAAe,CAAC,eAAe,CAAC,iBAAiB,CAAC,EAAE,CAAC;gBACrD,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC;oBAChB,GAAG,EAAE,CAAC;oBACN,MAAM;wBACJ,OAAO,EAAC,GAAG,EAAE,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,EAAC,CAAC;oBAC9C,CAAC;iBACF,CAAC;aACH;SACF,CAAC;aACD,KAAK,CAAC,EAAE,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;QAC3D,MAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;QACtE,IAAI,CAAC,SAAS,GAAG,qBAAqB,CAAC;QACvC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,EAAC,IAAI,EAAE,MAAM,EAAC,CAAC,CAAC;QAChD,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC,WAAW,EAAE,YAAY,CAAC,CAAC;KACjD;IACD,OAAO,WAAW,CAAC;AACrB,CAAC;AAED,MAAM,cAAe,SAAQ,EAAE,CAAC,UAAU;IACnB;IAArB,YAAqB,IAAY;QAC/B,KAAK,EAAE,CAAC;QADW,SAAI,GAAJ,IAAI,CAAQ;IAEjC,CAAC;IAED,EAAE,CAAC,KAAqB;QACtB,OAAO,IAAI,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,CAAC;IAClC,CAAC;IAED,KAAK;QACH,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QAC5C,IAAI,CAAC,SAAS,GAAG,mBAAmB,CAAC;QACrC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC;QAC7B,OAAO,IAAI,CAAC;IACd,CAAC;CACF;AAED,MAAM,CAAC,MAAM,kBAAkB,GAAG,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC;IACxD,WAAW,GAAqB,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC;IACnD,WAAW,GAAgB,IAAI,CAAC;IAEhC,MAAM,CAAC,MAAqB;QAC1B,MAAM,GAAG,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAChE,IAAI,CAAC,GAAG,EAAE;YACR,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC;SACvC;aAAM;YACL,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC,UAAU,CAAC,GAAG,CAChC,CAAC,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,EAAC,MAAM,EAAE,IAAI,cAAc,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,EAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SACjH;IACH,CAAC;IAED,aAAa,CAAC,KAAqB;QACjC,MAAM,WAAW,GAAG,EAAE,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;QACjD,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;YACvB,OAAO,IAAI,CAAC;SACb;QACD,MAAM,EAAC,KAAK,EAAC,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;QAC/B,IAAI,KAAK,CAAC,MAAM,GAAG,GAAG,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE;YAClD,OAAO,IAAI,CAAC;SACb;QACD,MAAM,GAAG,GAAG,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC;QACtC,MAAM,UAAU,GAAG,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACzC,IAAI,GAAG,KAAK,UAAU,CAAC,EAAE,EAAE;YACzB,OAAO,IAAI,CAAC;SACb;QACD,MAAM,UAAU,GAAG,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,GAAG,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;QACnE,KAAK,IAAI,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YACzC,IAAI,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE;gBACtG,OAAO,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;aACvB;SACF;QACD,OAAO,IAAI,CAAC;IACd,CAAC;CACF,EAAE,EAAC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,WAAW,EAAC,CAAC,CAAC;AAEtC,MAAM,UAAU,oBAAoB,CAAC,IAAmB;IACtD,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,CAAC;IAC/C,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;IACxC,IAAI,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE;QAChC,MAAM,EAAC,IAAI,EAAC,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC;QACzC,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,MAAM,CAAC,WAAW,GAAG,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;KAC7E;IACD,OAAO,OAAO,CAAC;AACjB,CAAC","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../core/common/common.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as CM from '../../../third_party/codemirror.next/codemirror.next.js';\nimport * as CodeHighlighter from '../code_highlighter/code_highlighter.js';\n\nimport {editorTheme} from './theme.js';\n\nconst LINES_TO_SCAN_FOR_INDENTATION_GUESSING = 1000;\n\nconst UIStrings = {\n  /**\n  *@description Label text for the editor\n  */\n  codeEditor: 'Code editor',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/components/text_editor/config.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst empty: CM.Extension = [];\n\nexport const dynamicSetting = CM.Facet.define<DynamicSetting<unknown>>();\n\n// The code below is used to wire up dynamic settings to editors. When\n// you include one of these objects in an editor configuration, the\n// TextEditor class will take care of listening to changes in the\n// setting, and updating the configuration as appropriate.\n\nexport class DynamicSetting<T> {\n  compartment = new CM.Compartment();\n  extension: CM.Extension;\n\n  constructor(\n      readonly settingName: string,\n      private readonly getExtension: (value: T, state: CM.EditorState) => CM.Extension,\n  ) {\n    this.extension = [this.compartment.of(empty), dynamicSetting.of(this as DynamicSetting<unknown>)];\n  }\n\n  sync(state: CM.EditorState, value: T): CM.StateEffect<unknown>|null {\n    const cur = this.compartment.get(state);\n    const needed = this.getExtension(value, state);\n    return cur === needed ? null : this.compartment.reconfigure(needed);\n  }\n\n  static bool(name: string, enabled: CM.Extension, disabled: CM.Extension = empty): DynamicSetting<boolean> {\n    return new DynamicSetting<boolean>(name, val => val ? enabled : disabled);\n  }\n}\n\nexport const tabMovesFocus = DynamicSetting.bool('textEditorTabMovesFocus', CM.keymap.of([{\n  key: 'Tab',\n  run: (view: CM.EditorView): boolean => view.state.doc.length ? CM.indentMore(view) : false,\n  shift: (view: CM.EditorView): boolean => view.state.doc.length ? CM.indentLess(view) : false,\n}]));\n\nexport const autocompletion = DynamicSetting.bool('textEditorAutocompletion', CM.autocompletion({icons: false}));\n\nexport const bracketMatching = DynamicSetting.bool('textEditorBracketMatching', CM.bracketMatching());\n\nexport const codeFolding = DynamicSetting.bool('textEditorCodeFolding', [CM.foldGutter(), CM.keymap.of(CM.foldKeymap)]);\n\nexport function guessIndent(doc: CM.Text): string {\n  const values: {[indent: string]: number} = Object.create(null);\n  let scanned = 0;\n  for (let cur = doc.iterLines(1, Math.min(doc.lines + 1, LINES_TO_SCAN_FOR_INDENTATION_GUESSING)); !cur.next().done;) {\n    let space = (/^\\s*/.exec(cur.value) as string[])[0];\n    if (space.length === cur.value.length || !space.length) {\n      continue;\n    }\n    if (space[0] === '\\t') {\n      space = '\\t';\n    } else if (/[^ ]/.test(space)) {\n      continue;\n    }\n    scanned++;\n    values[space] = (values[space] || 0) + 1;\n  }\n  const minOccurrence = scanned * 0.05;\n  const sorted = Object.entries(values).filter(e => e[1] > minOccurrence).sort((a, b) => a[1] - b[1]);\n  return sorted.length ? sorted[0][0] : Common.Settings.Settings.instance().moduleSetting('textEditorIndent').get();\n}\n\nconst cachedIndentUnit: {[indent: string]: CM.Extension} = Object.create(null);\n\nfunction getIndentUnit(indent: string): CM.Extension {\n  let value = cachedIndentUnit[indent];\n  if (!value) {\n    value = cachedIndentUnit[indent] = CM.indentUnit.of(indent);\n  }\n  return value;\n}\n\nexport const autoDetectIndent = new DynamicSetting<boolean>('textEditorAutoDetectIndent', (on, state) => {\n  return on ? CM.Prec.override(getIndentUnit(guessIndent(state.doc))) : empty;\n});\n\nfunction matcher(decorator: CM.MatchDecorator): CM.Extension {\n  return CM.ViewPlugin.define(\n      view => ({\n        decorations: decorator.createDeco(view),\n        update(u): void {\n          this.decorations = decorator.updateDeco(u, this.decorations);\n        },\n      }),\n      {\n        decorations: v => v.decorations,\n      });\n}\n\nconst WhitespaceDeco = new Map<string, CM.Decoration>();\n\nfunction getWhitespaceDeco(space: string): CM.Decoration {\n  const cached = WhitespaceDeco.get(space);\n  if (cached) {\n    return cached;\n  }\n  const result = CM.Decoration.mark({\n    attributes: space === '\\t' ? {\n      class: 'cm-highlightedTab',\n    } :\n                                 {class: 'cm-highlightedSpaces', 'data-display': '·'.repeat(space.length)},\n  });\n  WhitespaceDeco.set(space, result);\n  return result;\n}\n\nconst showAllWhitespace = matcher(new CM.MatchDecorator({\n  regexp: /\\t| +/g,\n  decoration: (match: RegExpExecArray): CM.Decoration => getWhitespaceDeco(match[0]),\n  boundary: /\\S/,\n}));\n\nconst showTrailingWhitespace = matcher(new CM.MatchDecorator({\n  regexp: /\\s+$/g,\n  decoration: CM.Decoration.mark({class: 'cm-trailingWhitespace'}),\n  boundary: /\\S/,\n}));\n\nexport const showWhitespace = new DynamicSetting<string>('showWhitespacesInEditor', value => {\n  if (value === 'all') {\n    return showAllWhitespace;\n  }\n  if (value === 'trailing') {\n    return showTrailingWhitespace;\n  }\n  return empty;\n});\n\nexport const allowScrollPastEof = DynamicSetting.bool('allowScrollPastEof', CM.scrollPastEnd());\n\nexport const indentUnit = new DynamicSetting<string>('textEditorIndent', getIndentUnit);\n\nexport const domWordWrap = DynamicSetting.bool('domWordWrap', CM.EditorView.lineWrapping);\n\nfunction detectLineSeparator(text: string): CM.Extension {\n  if (/\\r\\n/.test(text) && !/(^|[^\\r])\\n/.test(text)) {\n    return CM.EditorState.lineSeparator.of('\\r\\n');\n  }\n  return [];\n}\n\nconst baseKeymap = CM.keymap.of([\n  {key: 'Tab', run: CM.acceptCompletion},\n  {key: 'Ctrl-m', run: CM.cursorMatchingBracket, shift: CM.selectMatchingBracket},\n  {key: 'Mod-/', run: CM.toggleComment},\n  {key: 'Mod-d', run: CM.selectNextOccurrence},\n  {key: 'Alt-ArrowLeft', mac: 'Ctrl-ArrowLeft', run: CM.cursorSubwordBackward, shift: CM.selectSubwordBackward},\n  {key: 'Alt-ArrowRight', mac: 'Ctrl-ArrowRight', run: CM.cursorSubwordForward, shift: CM.selectSubwordForward},\n  ...CM.closeBracketsKeymap,\n  ...CM.standardKeymap,\n  ...CM.historyKeymap,\n]);\n\nfunction themeIsDark(): boolean {\n  const setting = Common.Settings.Settings.instance().moduleSetting('uiTheme').get();\n  return setting === 'systemPreferred' ? window.matchMedia('(prefers-color-scheme: dark)').matches : setting === 'dark';\n}\n\nconst dummyDarkTheme = CM.EditorView.theme({}, {dark: true});\n\nexport function baseConfiguration(text: string): CM.Extension {\n  return [\n    editorTheme,\n    themeIsDark() ? dummyDarkTheme : [],\n    CM.highlightSpecialChars(),\n    CM.history(),\n    CM.drawSelection(),\n    CM.EditorState.allowMultipleSelections.of(true),\n    CM.indentOnInput(),\n    CodeHighlighter.CodeHighlighter.getHighlightStyle(CM),\n    CM.closeBrackets(),\n    baseKeymap,\n    tabMovesFocus,\n    bracketMatching,\n    indentUnit,\n    CM.Prec.fallback(CM.EditorView.contentAttributes.of({'aria-label': i18nString(UIStrings.codeEditor)})),\n    detectLineSeparator(text),\n    autocompletion,\n    CM.tooltips({parent: getTooltipHost() as unknown as HTMLElement}),\n  ];\n}\n\n// Root editor tooltips at the top of the document, creating a special\n// element with the editor styles mounted in it for them. This is\n// annoying, but necessary because a scrollable parent node clips them\n// otherwise, `position: fixed` doesn't work due to `contain` styles,\n// and appending them diretly to `document.body` doesn't work because\n// the necessary style sheets aren't available there.\nlet tooltipHost: ShadowRoot|null = null;\n\nfunction getTooltipHost(): ShadowRoot {\n  if (!tooltipHost) {\n    const styleModules = CM.EditorState\n                             .create({\n                               extensions: [\n                                 editorTheme,\n                                 themeIsDark() ? dummyDarkTheme : [],\n                                 CodeHighlighter.CodeHighlighter.getHighlightStyle(CM),\n                                 CM.showTooltip.of({\n                                   pos: 0,\n                                   create() {\n                                     return {dom: document.createElement('div')};\n                                   },\n                                 }),\n                               ],\n                             })\n                             .facet(CM.EditorView.styleModule);\n    const host = document.body.appendChild(document.createElement('div'));\n    host.className = 'editor-tooltip-host';\n    tooltipHost = host.attachShadow({mode: 'open'});\n    CM.StyleModule.mount(tooltipHost, styleModules);\n  }\n  return tooltipHost;\n}\n\nclass CompletionHint extends CM.WidgetType {\n  constructor(readonly text: string) {\n    super();\n  }\n\n  eq(other: CompletionHint): boolean {\n    return this.text === other.text;\n  }\n\n  toDOM(): HTMLElement {\n    const span = document.createElement('span');\n    span.className = 'cm-completionHint';\n    span.textContent = this.text;\n    return span;\n  }\n}\n\nexport const showCompletionHint = CM.ViewPlugin.fromClass(class {\n  decorations: CM.DecorationSet = CM.Decoration.none;\n  currentHint: string|null = null;\n\n  update(update: CM.ViewUpdate): void {\n    const top = this.currentHint = this.topCompletion(update.state);\n    if (!top) {\n      this.decorations = CM.Decoration.none;\n    } else {\n      this.decorations = CM.Decoration.set(\n          [CM.Decoration.widget({widget: new CompletionHint(top), side: 1}).range(update.state.selection.main.head)]);\n    }\n  }\n\n  topCompletion(state: CM.EditorState): string|null {\n    const completions = CM.currentCompletions(state);\n    if (!completions.length) {\n      return null;\n    }\n    const {label} = completions[0];\n    if (label.length > 100 || label.indexOf('\\n') > -1) {\n      return null;\n    }\n    const pos = state.selection.main.head;\n    const lineBefore = state.doc.lineAt(pos);\n    if (pos !== lineBefore.to) {\n      return null;\n    }\n    const textBefore = lineBefore.text.slice(0, pos - lineBefore.from);\n    for (let i = label.length - 1; i > 0; i--) {\n      if (textBefore.endsWith(label.slice(0, i)) && !/\\w/.test(textBefore.charAt(textBefore.length - i - 1))) {\n        return label.slice(i);\n      }\n    }\n    return null;\n  }\n}, {decorations: p => p.decorations});\n\nexport function contentIncludingHint(view: CM.EditorView): string {\n  const plugin = view.plugin(showCompletionHint);\n  let content = view.state.doc.toString();\n  if (plugin && plugin.currentHint) {\n    const {head} = view.state.selection.main;\n    content = content.slice(0, head) + plugin.currentHint + content.slice(head);\n  }\n  return content;\n}\n"]}